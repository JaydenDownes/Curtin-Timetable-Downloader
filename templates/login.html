<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Curtin University Timetable Downloader</title>
    <meta name="description" content="Login to access your Curtin University timetables and seamlessly export them to Google Calendar, Outlook, Apple Calendar, and Android Calendar.">
    <meta name="keywords" content="login, Curtin University timetables, export to calendar apps">
    <meta property="og:title" content="Login - Curtin University Timetable Downloader">
    <meta property="og:description" content="Login to access your Curtin University timetables and seamlessly export them to Google Calendar, Outlook, Apple Calendar, and Android Calendar.">
    <meta property="og:url" content="https://www.yourwebsite.com/login">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.yourwebsite.com/login">

    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="static/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicons/favicon-16x16.png">
    <link rel="manifest" href="static/favicons/site.webmanifest">
    <style>
        body {
            background-color: rgb(39, 39, 42);
            font-family: 'Inter', sans-serif;
            color: white;
        }
        .fixed-bottom-center {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        .one-third-from-top {
            margin-top: calc((100vh - 124px - 536px)/ 2);
        }
    </style>
</head>
<body>
    <nav class="flex items-center justify-between p-12">
        <div class="text-white font-bold text-xl">Curtin Timetable</div>
        <div id="navbar">
            <!-- Loaded by Javascript -->
        </div>
    </nav>
    <div class="flex flex-col items-center justify-center text-center w-full one-third-from-top">
                <div class="w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700">
                    <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
                        <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white">
                            Sign in to your Curtin account
                        </h1>
                        <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4 md:space-y-6">
                            <div>
                                <label for="user" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your Student ID</label>
                                <input type="text" name="user" id="user" autocomplete="username" class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="12345678" required="">
                            </div>
                            <div>
                                <label for="pass" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
                                <input type="password" name="password" id="pass" placeholder="••••••••" autocomplete="current-password" class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required="">
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-start">
                                    <div class="flex items-center h-5">
                                        <input id="remember" aria-describedby="remember" type="checkbox" class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800">
                                    </div>
                                    <div class="ml-3 text-sm">
                                        <label for="remember" class="text-gray-500 dark:text-gray-300">Remember me</label>
                                    </div>
                                </div>
                            </div>
                            <p class="text-xs font-light text-gray-500 dark:text-gray-400 pt-4 pb-4">
                                <a class="font-bold">Please note:</a> This software operates independently of Curtin University. Your login details are used solely to access your timetable from Curtin's Elsie Service through your browser, and none of your information is stored or saved on our servers.
                            </p>
                            <button type="submit" class="w-full text-white bg-gray-900 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Sign in</button>
                        </form>
                        
                    </div>
                </div>
    </div>

        <!-- Error Popup -->
        <div id="toast-warning" class="hidden fixed flex items-center w-full max-w-xs p-4 space-x-4 text-gray-500 bg-white rounded-lg shadow right-5 bottom-5 dark:text-gray-400 dark:bg-gray-800" role="alert">
            <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-orange-500 bg-orange-100 rounded-lg dark:bg-orange-700 dark:text-orange-200">
                <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 0 1-2 0V6a1 1 0 0 1 2 0v5Z"/>
                </svg>
                <span class="sr-only">Warning icon</span>
            </div>
            <div id="toast-message" class="ms-3 text-sm font-normal">We encountered an error: {Error message here}</div>
            <button  id="toast-close" type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-dismiss-target="#toast-warning" aria-label="Close">
                <span class="sr-only">Close</span>
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
            </button>
        </div>
    
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
    <script>
        // Function to update the navigation bar based on login status
        function updateNavbar() {
            const navBar = document.getElementById('navbar');
            const loggedIn = localStorage.getItem('loggedIn') === 'true';

            if (loggedIn) {
                navBar.innerHTML = `
                    <a href="#" class="text-white mr-4">Home</a>
                    <a href="app" class="text-white mr-4">Calendar</a>
                    <a href="#" class="text-white" onclick="logout()">Logout</a>
                `;
            } else {
                navBar.innerHTML = `
                    <a href="#" class="text-white mr-4">Home</a>
                `;
            }
        }

        // Check login status and update the navigation bar when the page loads
        window.onload = function() {
            updateNavbar();
        };

        function logout() {
            localStorage.removeItem('loggedIn');
            window.location.href = '/login';
        }
    </script>
    <script src="app.js"></script>
</body>
</html>
